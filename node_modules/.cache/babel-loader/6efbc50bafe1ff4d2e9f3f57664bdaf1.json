{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\src\\\\components\\\\dashboard\\\\Proposals\\\\IndividualProposal\\\\EditProposalModal.js\";\nimport React from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport Fab from \"@material-ui/core/Fab\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { Divider } from \"@material-ui/core\";\nimport store from \"../../../../store\";\nimport grey from '@material-ui/core/colors/grey';\nimport { getProposalById } from \"../../../../api\";\nimport { getProposalByIdAction, updateProposalAction } from \"../../../../store/actionCreators\";\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      flexGrow: 1,\n      display: \"flex\",\n      flexWrap: \"wrap\"\n    },\n    paper: {\n      backgroundColor: theme.palette.background.paper,\n      boxShadow: theme.shadows[5],\n      padding: theme.spacing(4),\n      paddingLeft: theme.spacing(4),\n      outline: \"none\"\n    },\n    formControl: {\n      margin: 2,\n      minWidth: 120,\n      maxWidth: 300\n    },\n    chips: {\n      display: \"flex\",\n      flexWrap: \"wrap\"\n    },\n    closeButton: {\n      position: \"absolute\",\n      right: theme.spacing(),\n      top: theme.spacing(),\n      color: theme.palette.grey[500]\n    },\n    sendButton: {\n      backgroundColor: \"#094183\",\n      \"&:hover\": {\n        backgroundColor: \"#4074B2\"\n      }\n    },\n    discardButton: {\n      color: \"#094183\"\n    },\n    editButton: {\n      marginTop: 0,\n      color: \"#094183\"\n    },\n    textField: {\n      marginLeft: 0,\n      marginRight: \"5%\",\n      width: \"45%\"\n    },\n    fab: {\n      backgroundColor: \"#FFFFFF\",\n      color: grey[700],\n      \"&:hover\": {\n        backgroundColor: grey[400],\n        color: grey[800]\n      },\n      boxShadow: \"none\"\n    }\n  };\n};\n\nvar ITEM_HEIGHT = 48;\nvar ITEM_PADDING_TOP = 8;\nvar MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: \"87%\"\n    }\n  },\n  anchorOrigin: {\n    vertical: \"bottom\",\n    horizontal: \"left\"\n  },\n  transformOrigin: {\n    vertical: \"top\",\n    horizontal: \"left\"\n  },\n  getContentAnchorEl: null,\n  dense: \"true\"\n};\n\nvar EditProposalModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EditProposalModal, _React$Component);\n\n  function EditProposalModal(props) {\n    var _this;\n\n    _classCallCheck(this, EditProposalModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditProposalModal).call(this, props));\n\n    _this._handleOpen = function () {\n      _this.setState({\n        open: true\n      });\n    };\n\n    _this._handleDiscard = function () {\n      _this.setState({\n        open: false\n      });\n    };\n\n    _this._addEditNote = function (proposal) {\n      var newNote = {\n        text: \"Proposal has been updated.\",\n        date: Date.now().toString() // Date is represented as an integer, stored as a string\n\n      };\n      var notes = proposal.notes;\n\n      if (notes) {\n        notes.push(newNote);\n      } else {\n        notes = [newNote];\n      }\n\n      return notes;\n    };\n\n    _this._handleUpdate = function () {\n      var name = document.getElementById(\"name\").value;\n      var outlineOfProject = document.getElementById(\"outlineOfProject\").value;\n      var endProductBenefits = document.getElementById(\"endProductBenefits\").value;\n      var endProductUse = document.getElementById(\"endProductUse\").value;\n      var beneficiaries = document.getElementById(\"beneficiaries\").value;\n      var originality = document.getElementById(\"originality\").value;\n      var subjectId = document.getElementById(\"subjectId\").value; // Create new proposal object\n\n      var proposal = {\n        status: _this.props.proposal.status,\n        notes: _this._addEditNote(_this.props.proposal),\n        _id: _this.props.proposal._id,\n        name: name,\n        outlineOfProject: outlineOfProject,\n        endProductBenefits: endProductBenefits,\n        endProductUse: endProductUse,\n        beneficiaries: beneficiaries,\n        originality: originality,\n        clientId: _this.props.proposal.clientId,\n        subjectId: subjectId,\n        date: _this.props.proposal.date,\n        __v: _this.props.proposal.__v // Send PUT request\n\n      };\n      var updateProposalAct = updateProposalAction(_this.props.proposal._id, proposal);\n      store.dispatch(updateProposalAct); // Update project/proposal state\n\n      _this._updateProposalState(_this.props.proposal._id); // Close window\n\n\n      _this._handleDiscard();\n    };\n\n    _this.state = {\n      open: false,\n      fullWidth: true,\n      maxWidth: \"lg\"\n    };\n    return _this;\n  }\n\n  _createClass(EditProposalModal, [{\n    key: \"_updateProposalState\",\n    value: function () {\n      var _updateProposalState2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(proposalID) {\n        var proposal, getProposalAction;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return getProposalById(proposalID);\n\n              case 2:\n                proposal = _context.sent;\n                getProposalAction = getProposalByIdAction(proposal);\n                store.dispatch(getProposalAction);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function _updateProposalState(_x) {\n        return _updateProposalState2.apply(this, arguments);\n      }\n\n      return _updateProposalState;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          proposal = _this$props.proposal;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(Fab, {\n        color: \"default\",\n        \"aria-label\": \"Edit\",\n        className: classes.fab,\n        onClick: this._handleOpen,\n        size: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(EditIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      })), React.createElement(Dialog, {\n        fullWidth: this.state.fullWidth,\n        maxWidth: this.state.maxWidth,\n        open: this.state.open,\n        onClose: this._handleDiscard,\n        \"aria-labelledby\": \"max-width-dialog-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        onClose: this._handleDiscard,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, \"Edit Proposal\"), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: classes.container,\n        noValidate: true,\n        autoComplete: \"off\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        id: \"name\",\n        label: \"Proposal name\",\n        defaultValue: proposal.name,\n        className: classes.textField,\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"subjectId\",\n        label: \"Subject assigned to\",\n        defaultValue: proposal.subjectId,\n        className: classes.textField,\n        margin: \"normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"outlineOfProject\",\n        label: \"Project outline\",\n        defaultValue: proposal.outlineOfProject,\n        className: classes.textField,\n        margin: \"normal\",\n        multiline: \"true\",\n        rows: \"5\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"endProductUse\",\n        label: \"Use of the end product\",\n        defaultValue: proposal.endProductUse,\n        className: classes.textField,\n        margin: \"normal\",\n        multiline: \"true\",\n        rows: \"5\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"endProductBenefits\",\n        label: \"Benefits of end product\",\n        defaultValue: proposal.endProductBenefits,\n        className: classes.textField,\n        margin: \"normal\",\n        multiline: \"true\",\n        rows: \"5\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"beneficiaries\",\n        label: \"Beneficiaries of end product\",\n        defaultValue: proposal.beneficiaries,\n        className: classes.textField,\n        margin: \"normal\",\n        multiline: \"true\",\n        rows: \"5\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }), React.createElement(TextField, {\n        id: \"originality\",\n        label: \"Originality of the idea\",\n        defaultValue: proposal.originality,\n        className: classes.textField,\n        margin: \"normal\",\n        multiline: \"true\",\n        rows: \"5\",\n        variant: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }))), React.createElement(Divider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: this._handleUpdate,\n        className: classes.sendButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, \"Update\"), React.createElement(Button, {\n        onClick: this._handleDiscard,\n        color: \"primary\",\n        className: classes.discardButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, \"Discard\"))));\n    }\n  }]);\n\n  return EditProposalModal;\n}(React.Component);\n\nexport default withStyles(styles)(EditProposalModal);","map":{"version":3,"sources":["C:\\Users\\Reyna\\Documents\\GitHub\\SWEN90013\\src\\components\\dashboard\\Proposals\\IndividualProposal\\EditProposalModal.js"],"names":["React","withStyles","Button","Dialog","DialogActions","DialogContent","DialogTitle","Fab","EditIcon","TextField","Divider","store","grey","getProposalById","getProposalByIdAction","updateProposalAction","styles","theme","root","flexGrow","display","flexWrap","paper","backgroundColor","palette","background","boxShadow","shadows","padding","spacing","paddingLeft","outline","formControl","margin","minWidth","maxWidth","chips","closeButton","position","right","top","color","sendButton","discardButton","editButton","marginTop","textField","marginLeft","marginRight","width","fab","ITEM_HEIGHT","ITEM_PADDING_TOP","MenuProps","PaperProps","style","maxHeight","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","dense","EditProposalModal","props","_handleOpen","setState","open","_handleDiscard","_addEditNote","proposal","newNote","text","date","Date","now","toString","notes","push","_handleUpdate","name","document","getElementById","value","outlineOfProject","endProductBenefits","endProductUse","beneficiaries","originality","subjectId","status","_id","clientId","__v","updateProposalAct","dispatch","_updateProposalState","state","fullWidth","proposalID","getProposalAction","classes","container","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { Divider } from \"@material-ui/core\";\r\nimport store from \"../../../../store\";\r\nimport grey from '@material-ui/core/colors/grey';\r\nimport {getProposalById} from \"../../../../api\";\r\nimport {\r\n    getProposalByIdAction,\r\n    updateProposalAction,\r\n} from \"../../../../store/actionCreators\";\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        flexGrow: 1,\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\"\r\n    },\r\n    paper: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        boxShadow: theme.shadows[5],\r\n        padding: theme.spacing(4),\r\n        paddingLeft: theme.spacing(4),\r\n        outline: \"none\"\r\n    },\r\n    formControl: {\r\n        margin: 2,\r\n        minWidth: 120,\r\n        maxWidth: 300\r\n    },\r\n    chips: {\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\"\r\n    },\r\n    closeButton: {\r\n        position: \"absolute\",\r\n        right: theme.spacing(),\r\n        top: theme.spacing(),\r\n        color: theme.palette.grey[500]\r\n    },\r\n    sendButton: {\r\n        backgroundColor: \"#094183\",\r\n        \"&:hover\": {\r\n            backgroundColor: \"#4074B2\"\r\n        }\r\n    },\r\n    discardButton: {\r\n        color: \"#094183\"\r\n    },\r\n    editButton: {\r\n        marginTop: 0,\r\n        color: \"#094183\",\r\n    },\r\n    textField: {\r\n        marginLeft: 0,\r\n        marginRight: \"5%\",\r\n        width: \"45%\"\r\n    },\r\n    fab: {\r\n        backgroundColor: \"#FFFFFF\",\r\n        color: grey[700],\r\n        \"&:hover\": {\r\n            backgroundColor: grey[400],\r\n            color: grey[800]\r\n        },\r\n        boxShadow: \"none\"\r\n    },\r\n});\r\n\r\nconst ITEM_HEIGHT = 48;\r\nconst ITEM_PADDING_TOP = 8;\r\nconst MenuProps = {\r\n    PaperProps: {\r\n        style: {\r\n            maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n            width: \"87%\"\r\n        }\r\n    },\r\n    anchorOrigin: {\r\n        vertical: \"bottom\",\r\n        horizontal: \"left\"\r\n    },\r\n    transformOrigin: {\r\n        vertical: \"top\",\r\n        horizontal: \"left\"\r\n    },\r\n    getContentAnchorEl: null,\r\n    dense: \"true\"\r\n};\r\n\r\nclass EditProposalModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            open: false,\r\n            fullWidth: true,\r\n            maxWidth: \"lg\",\r\n        };\r\n    }\r\n\r\n    _handleOpen = () => {\r\n        this.setState({ open: true });\r\n    };\r\n\r\n    _handleDiscard = () => {\r\n        this.setState({ open: false });\r\n    };\r\n\r\n    _addEditNote = (proposal) => {\r\n        var newNote = {\r\n            text: \"Proposal has been updated.\",\r\n            date: Date.now().toString(),    // Date is represented as an integer, stored as a string\r\n        };\r\n        var notes = proposal.notes;\r\n        if (notes) {\r\n            notes.push(newNote);\r\n        } else {\r\n            notes = [newNote];\r\n        }\r\n\r\n        return notes;\r\n    }\r\n\r\n    // handleUpdate gets the data from form HTML\r\n    _handleUpdate = () => {\r\n        var name = document.getElementById(\"name\").value;\r\n        var outlineOfProject = document.getElementById(\"outlineOfProject\").value;\r\n        var endProductBenefits = document.getElementById(\"endProductBenefits\").value;\r\n        var endProductUse = document.getElementById(\"endProductUse\").value;\r\n        var beneficiaries = document.getElementById(\"beneficiaries\").value;\r\n        var originality = document.getElementById(\"originality\").value;\r\n        var subjectId = document.getElementById(\"subjectId\").value;\r\n\r\n        // Create new proposal object\r\n        let proposal = {\r\n            status: this.props.proposal.status,\r\n            notes: this._addEditNote(this.props.proposal),\r\n            _id: this.props.proposal._id,\r\n            name: name,\r\n            outlineOfProject: outlineOfProject,\r\n            endProductBenefits: endProductBenefits,\r\n            endProductUse: endProductUse,\r\n            beneficiaries: beneficiaries,\r\n            originality: originality,\r\n            clientId: this.props.proposal.clientId,\r\n            subjectId: subjectId,\r\n            date: this.props.proposal.date,\r\n            __v: this.props.proposal.__v,\r\n        }\r\n\r\n         // Send PUT request\r\n         const updateProposalAct = updateProposalAction(this.props.proposal._id, proposal);\r\n         store.dispatch(updateProposalAct);\r\n\r\n         // Update project/proposal state\r\n         this._updateProposalState(this.props.proposal._id);\r\n\r\n         // Close window\r\n         this._handleDiscard();\r\n    };\r\n\r\n    async _updateProposalState(proposalID) {\r\n        const proposal = await getProposalById(proposalID);\r\n        const getProposalAction = getProposalByIdAction(proposal);\r\n        store.dispatch(getProposalAction);    \r\n    };\r\n\r\n    render() {\r\n        const { classes, proposal } = this.props;\r\n\r\n        return (\r\n            <div>\r\n                <Fab\r\n                    color=\"default\"\r\n                    aria-label=\"Edit\"\r\n                    className={classes.fab}\r\n                    onClick={this._handleOpen}\r\n                    size=\"small\"\r\n                    >\r\n                    <EditIcon />\r\n                </Fab>\r\n                <Dialog\r\n                    fullWidth={this.state.fullWidth}\r\n                    maxWidth={this.state.maxWidth}\r\n                    open={this.state.open}\r\n                    onClose={this._handleDiscard}\r\n                    aria-labelledby=\"max-width-dialog-title\"\r\n                >\r\n                    <DialogTitle onClose={this._handleDiscard}>Edit Proposal</DialogTitle>\r\n\r\n                    <Divider />\r\n\r\n                    <DialogContent>\r\n                        <form className={classes.container} noValidate autoComplete=\"off\">\r\n                            <TextField\r\n                                id=\"name\"\r\n                                label=\"Proposal name\"\r\n                                defaultValue={proposal.name}\r\n                                className={classes.textField}\r\n                                margin=\"normal\"\r\n                            />\r\n                            <TextField\r\n                                id=\"subjectId\"\r\n                                label=\"Subject assigned to\"\r\n                                defaultValue={proposal.subjectId}\r\n                                className={classes.textField}\r\n                                margin=\"normal\"\r\n                            />\r\n                            <TextField\r\n                                id=\"outlineOfProject\"\r\n                                label=\"Project outline\"\r\n                                defaultValue={proposal.outlineOfProject}\r\n                                className={classes.textField}\r\n                                margin=\"normal\"\r\n                                multiline=\"true\"\r\n                                rows=\"5\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                            <TextField\r\n                                id=\"endProductUse\"\r\n                                label=\"Use of the end product\"\r\n                                defaultValue={proposal.endProductUse}\r\n                                className={classes.textField}\r\n                                margin=\"normal\"\r\n                                multiline=\"true\"\r\n                                rows=\"5\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                            <TextField\r\n                                id=\"endProductBenefits\"\r\n                                label=\"Benefits of end product\"\r\n                                defaultValue={proposal.endProductBenefits}\r\n                                className={classes.textField}\r\n                                margin=\"normal\"\r\n                                multiline=\"true\"\r\n                                rows=\"5\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                            <TextField\r\n                                id=\"beneficiaries\"\r\n                                label=\"Beneficiaries of end product\"\r\n                                defaultValue={proposal.beneficiaries}\r\n                                className={classes.textField}\r\n                                margin=\"normal\"\r\n                                multiline=\"true\"\r\n                                rows=\"5\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                            <TextField\r\n                                id=\"originality\"\r\n                                label=\"Originality of the idea\"\r\n                                defaultValue={proposal.originality}\r\n                                className={classes.textField}\r\n                                margin=\"normal\"\r\n                                multiline=\"true\"\r\n                                rows=\"5\"\r\n                                variant=\"outlined\"\r\n                            />\r\n                        </form>\r\n                    </DialogContent>\r\n                    <Divider />\r\n\r\n                    <DialogActions>\r\n                        <Button\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick={this._handleUpdate}\r\n                            className={classes.sendButton}\r\n                        >\r\n                            Update\r\n                </Button>\r\n                        <Button\r\n                            onClick={this._handleDiscard}\r\n                            color=\"primary\"\r\n                            className={classes.discardButton}\r\n                        >\r\n                            Discard\r\n                </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(EditProposalModal);\r\n"]},"metadata":{},"sourceType":"module"}