{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\src\\\\components\\\\dashboard\\\\Client\\\\AllClients.js\";\n\n/**\r\n * This component contains all clients. It is entered via the \"View Clients\" link on the app drawer.\r\n * Author: Reyna Tan\r\n * Date: 09/10/2019\r\n */\nimport React, { PureComponent } from 'react';\nimport store from \"../../../store\";\nimport { getAllClients } from \"../../../api\";\nimport { getAllClientsAction } from \"../../../store/actionCreators\";\nimport MaterialTable from 'material-table';\nimport ClientPageModal from \"./ClientPageModal\";\nimport { grey, red } from \"@material-ui/core/colors\";\nimport ErrorOutlinedIcon from '@material-ui/icons/ErrorOutlined';\nimport ErrorOutlineOutlinedIcon from '@material-ui/icons/ErrorOutlineOutlined'; // Options of dropdown filter for the technical ability column\n\nvar TECHNICAL_ABILITY_LOOKUP = {\n  1: \"1\",\n  2: \"2\",\n  3: \"3\",\n  4: \"4\",\n  5: \"5\",\n  6: \"6\",\n  7: \"7\",\n  8: \"8\",\n  9: \"9\",\n  10: \"10\"\n};\n\nvar AllClients =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(AllClients, _PureComponent);\n\n  function AllClients(props) {\n    var _this;\n\n    _classCallCheck(this, AllClients);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AllClients).call(this, props));\n    _this.state = store.getState();\n    _this._handleStoreChange = _this._handleStoreChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    store.subscribe(_this._handleStoreChange);\n    return _this;\n  }\n\n  _createClass(AllClients, [{\n    key: \"_handleStoreChange\",\n    value: function _handleStoreChange() {\n      this.setState(store.getState());\n    }\n  }, {\n    key: \"_reqTodoList\",\n    value: function () {\n      var _reqTodoList2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var clients, getAllClientsAct;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return getAllClients();\n\n              case 2:\n                clients = _context.sent;\n                getAllClientsAct = getAllClientsAction(clients);\n                store.dispatch(getAllClientsAct);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function _reqTodoList() {\n        return _reqTodoList2.apply(this, arguments);\n      }\n\n      return _reqTodoList;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._reqTodoList();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      console.log(nextProps.currentPage);\n    }\n  }, {\n    key: \"_formatDataIntoTableList\",\n    value: function _formatDataIntoTableList() {\n      var _this2 = this;\n\n      var clients = this.state.clients;\n      var clientList = [];\n      clients.forEach(function (c) {\n        var nextClient = {\n          name: c.firstName + \" \" + c.lastName,\n          email: c.email,\n          contactNumber: c.contactNumber,\n          organisation: c.organisation.name,\n          technicalAbility: c.technicalAbility,\n          flag: c.flag,\n          client: _this2._getClientPageModal(c)\n        };\n        clientList.push(nextClient);\n      });\n      return clientList;\n    } // Render clientPageModal\n\n  }, {\n    key: \"_getClientPageModal\",\n    value: function _getClientPageModal(client) {\n      return React.createElement(ClientPageModal, {\n        client: client,\n        objType: \"allClients\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      });\n    } // Render clientPageModal\n\n  }, {\n    key: \"_handleClick\",\n    value: function _handleClick(client) {\n      return React.createElement(ClientPageModal, {\n        client: client,\n        objType: \"allClients\" // objID={null}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      });\n    } // Render correct flagIcon\n\n  }, {\n    key: \"_getClientFlagIcon\",\n    value: function _getClientFlagIcon(flag) {\n      if (flag) {\n        return React.createElement(ErrorOutlinedIcon, {\n          style: {\n            color: red[500]\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(ErrorOutlineOutlinedIcon, {\n          style: {\n            color: grey[500]\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        });\n      }\n    } // Return technicalAbility lookup options\n\n  }, {\n    key: \"_getTechnicalAbilityLookup\",\n    value: function _getTechnicalAbilityLookup() {\n      return TECHNICAL_ABILITY_LOOKUP;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this,\n          _ref;\n\n      return React.createElement(MaterialTable, {\n        title: \"All Clients\",\n        columns: [(_ref = {\n          title: 'Flag',\n          field: 'flag',\n          filterCellStyle: {\n            maxWidth: 50\n          },\n          lookup: {\n            1: \"Yes\",\n            0: \"No\"\n          }\n        }, _defineProperty(_ref, \"filterCellStyle\", {\n          paddingTop: 0\n        }), _defineProperty(_ref, \"cellStyle\", {\n          textAlign: \"center\"\n        }), _defineProperty(_ref, \"render\", function render(rowData) {\n          return _this3._getClientFlagIcon(rowData.flag);\n        }), _ref), {\n          title: 'Name',\n          field: 'name'\n        }, {\n          title: 'Email',\n          field: 'email'\n        }, {\n          title: 'Contact Number',\n          field: 'contactNumber'\n        }, {\n          title: 'Organisation',\n          field: 'organisation'\n        }, {\n          title: 'Technical Ability',\n          field: 'technicalAbility',\n          cellStyle: {\n            textAlign: \"center\"\n          },\n          lookup: this._getTechnicalAbilityLookup()\n        }, {\n          title: 'View',\n          field: 'client',\n          filtering: false,\n          export: false\n        }],\n        data: this._formatDataIntoTableList(),\n        options: {\n          filtering: true,\n          exportButton: true\n        } // onRowClick={(event, rowData) => this._handleClick(rowData.client)}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return AllClients;\n}(PureComponent);\n\nexport default AllClients;","map":{"version":3,"sources":["C:\\Users\\Reyna\\Documents\\GitHub\\SWEN90013\\src\\components\\dashboard\\Client\\AllClients.js"],"names":["React","PureComponent","store","getAllClients","getAllClientsAction","MaterialTable","ClientPageModal","grey","red","ErrorOutlinedIcon","ErrorOutlineOutlinedIcon","TECHNICAL_ABILITY_LOOKUP","AllClients","props","state","getState","_handleStoreChange","bind","subscribe","setState","clients","getAllClientsAct","dispatch","_reqTodoList","nextProps","console","log","currentPage","clientList","forEach","c","nextClient","name","firstName","lastName","email","contactNumber","organisation","technicalAbility","flag","client","_getClientPageModal","push","color","title","field","filterCellStyle","maxWidth","lookup","paddingTop","textAlign","rowData","_getClientFlagIcon","cellStyle","_getTechnicalAbilityLookup","filtering","export","_formatDataIntoTableList","exportButton"],"mappings":"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","sourcesContent":["/**\r\n * This component contains all clients. It is entered via the \"View Clients\" link on the app drawer.\r\n * Author: Reyna Tan\r\n * Date: 09/10/2019\r\n */\r\n\r\nimport React, { PureComponent } from 'react';\r\nimport store from \"../../../store\";\r\nimport {getAllClients} from \"../../../api\";\r\nimport {\r\n    getAllClientsAction,\r\n} from \"../../../store/actionCreators\";\r\nimport MaterialTable from 'material-table';\r\nimport ClientPageModal from \"./ClientPageModal\";\r\nimport {grey, red} from \"@material-ui/core/colors\";\r\nimport ErrorOutlinedIcon from '@material-ui/icons/ErrorOutlined';\r\nimport ErrorOutlineOutlinedIcon from '@material-ui/icons/ErrorOutlineOutlined';\r\n\r\n// Options of dropdown filter for the technical ability column\r\nconst TECHNICAL_ABILITY_LOOKUP = {\r\n    1: \"1\",\r\n    2: \"2\",\r\n    3: \"3\",\r\n    4: \"4\",\r\n    5: \"5\",\r\n    6: \"6\",\r\n    7: \"7\",\r\n    8: \"8\",\r\n    9: \"9\",\r\n    10: \"10\"\r\n}\r\n\r\nclass AllClients extends PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = store.getState();\r\n\r\n        this._handleStoreChange = this._handleStoreChange.bind(this);\r\n        store.subscribe(this._handleStoreChange);\r\n    }\r\n\r\n    _handleStoreChange() {\r\n        this.setState(store.getState());\r\n    }\r\n\r\n    async _reqTodoList() {\r\n        const clients = await getAllClients();\r\n        const getAllClientsAct = getAllClientsAction(clients);\r\n        store.dispatch(getAllClientsAct);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this._reqTodoList();\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        console.log(nextProps.currentPage);\r\n    }\r\n\r\n    _formatDataIntoTableList() {\r\n        const {clients} = this.state;\r\n\r\n        let clientList = [];\r\n\r\n        clients.forEach(c => {\r\n            let nextClient = {\r\n                name: c.firstName + \" \" + c.lastName,\r\n                email: c.email,\r\n                contactNumber: c.contactNumber,\r\n                organisation: c.organisation.name,\r\n                technicalAbility: c.technicalAbility,\r\n                flag: c.flag,\r\n                client: this._getClientPageModal(c)\r\n            }\r\n\r\n            clientList.push(nextClient);\r\n            \r\n        })\r\n\r\n        return clientList;\r\n    }\r\n\r\n    // Render clientPageModal\r\n    _getClientPageModal(client) {\r\n        return (\r\n            <ClientPageModal \r\n                client={client}\r\n                objType={\"allClients\"}\r\n            />\r\n        )\r\n    }\r\n\r\n    // Render clientPageModal\r\n    _handleClick(client) {\r\n       return (\r\n            <ClientPageModal \r\n                client={client}\r\n                objType={\"allClients\"}\r\n                // objID={null}\r\n            />\r\n        )\r\n    }\r\n\r\n    // Render correct flagIcon\r\n    _getClientFlagIcon(flag){\r\n        if (flag) {\r\n            return <ErrorOutlinedIcon style={{color: red[500]}}/>\r\n        } else {\r\n            return <ErrorOutlineOutlinedIcon style={{color: grey[500]}}/>\r\n        }\r\n    }\r\n\r\n    // Return technicalAbility lookup options\r\n    _getTechnicalAbilityLookup() {\r\n        return TECHNICAL_ABILITY_LOOKUP;\r\n    }\r\n\r\n    render() {\r\n        \r\n        return (\r\n            <MaterialTable\r\n                title=\"All Clients\"\r\n                columns={[\r\n                    { title: 'Flag', field: 'flag', \r\n                        filterCellStyle:{maxWidth:50}, \r\n                        lookup: {1: \"Yes\", 0: \"No\"}, \r\n                        filterCellStyle:{paddingTop:0},\r\n                        cellStyle: {textAlign:\"center\"},\r\n                        render: rowData => this._getClientFlagIcon(rowData.flag)\r\n                    },\r\n                    { title: 'Name', field: 'name' },\r\n                    { title: 'Email', field: 'email' },\r\n                    { title: 'Contact Number', field: 'contactNumber' },\r\n                    { title: 'Organisation', field: 'organisation' },\r\n                    { title: 'Technical Ability', \r\n                        field: 'technicalAbility',\r\n                        cellStyle: {textAlign:\"center\"},\r\n                        lookup: this._getTechnicalAbilityLookup()\r\n                     },\r\n                    { title: 'View', field: 'client', filtering: false, export: false }\r\n                ]}\r\n                data={this._formatDataIntoTableList()}\r\n                options={{\r\n                    filtering: true,\r\n                    exportButton: true,\r\n                }}\r\n                // onRowClick={(event, rowData) => this._handleClick(rowData.client)}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default (AllClients);"]},"metadata":{},"sourceType":"module"}