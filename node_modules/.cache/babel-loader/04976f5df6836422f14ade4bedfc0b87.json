{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\src\\\\components\\\\dashboard\\\\Proposals\\\\IndividualProposal\\\\StatusChangeModal.js\";\nimport React from \"react\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Button from \"@material-ui/core/Button\";\nimport { green, red, grey } from \"@material-ui/core/colors\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport axios from \"axios\";\nimport store from \"../../../../store\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { getAllSubjects } from \"../../../../api\";\nimport { getGetAllSubjectsAction } from \"../../../../store/actionCreators\";\nimport { proposalOutcome } from \"../../Email/AutomatedEmailFunctions\";\n\nvar styles = function styles(theme) {\n  return {\n    acceptButton: {\n      backgroundColor: green[400],\n      \"&:hover\": {\n        backgroundColor: green[800]\n      }\n    },\n    rejectButton: {\n      backgroundColor: red[400],\n      \"&:hover\": {\n        backgroundColor: red[800]\n      }\n    },\n    confirmButton: {\n      backgroundColor: \"#094183\",\n      color: \"#FFFFFF\",\n      \"&:hover\": {\n        backgroundColor: \"#4074B2\"\n      }\n    },\n    discardButton: {\n      color: \"#094183\"\n    }\n  };\n};\n\nvar StatusChangeModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(StatusChangeModal, _React$Component);\n\n  function StatusChangeModal(props) {\n    var _this;\n\n    _classCallCheck(this, StatusChangeModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(StatusChangeModal).call(this, props));\n\n    _this._handleClose = function () {\n      _this.setState({\n        open: false\n      });\n    };\n\n    _this._handleChange = function (event) {\n      _this.setState(function () {\n        return {\n          subjectName: event.target.value\n        };\n      });\n    };\n\n    _this._handleUpdate = function () {\n      var responseText = document.getElementById(\"reason\").value;\n\n      if (responseText === \"\" || _this.state.subjectName === \"\") {\n        alert(\"Please complete all fields\");\n      } else {\n        if (_this.state.option === \"approved\") {\n          _this.setState({\n            open: false\n          });\n\n          console.log(\"the proposal id is \" + _this.props.id);\n          console.log(\"the subject for this project is \" + _this.state.subjectName);\n          axios.post(\"http://172.26.88.142:3000/api/proposal/\" + _this.props.id + \"/accept\", {\n            subjectName: _this.state.subjectName,\n            acceptReason: responseText\n          }).then(function (response) {\n            console.log(response);\n            proposalOutcome(store.getState().proposal.client.email, store.getState().proposal.client.secondaryContactEmail, \"accept\", responseText);\n          }).catch(function (error) {\n            console.log(error);\n          });\n        } else if (_this.state.option === \"reject\") {\n          _this.setState({\n            open: false\n          });\n\n          console.log(\"the proposal id is\" + _this.props.id);\n          console.log(\"the reason to reject is \" + responseText);\n          axios.post(\"http://172.26.88.142:3000/api/proposal/\" + _this.props.id + \" /reject\", {\n            rejectReason: responseText\n          }).then(function (response) {\n            console.log(response);\n            proposalOutcome(store.getState().proposal.client.email, store.getState().proposal.client.secondaryContactEmail, \"reject\", responseText);\n          }).catch(function (error) {\n            console.log(error);\n          });\n        }\n      }\n    };\n\n    _this._handleChange = function (event) {\n      _this.setState({\n        subjectName: [event.target.value]\n      });\n\n      console.log(_this.state.subjectName);\n    };\n\n    _this.state = {\n      open: false,\n      fullWidth: true,\n      maxWidth: \"md\",\n      option: \"\",\n      rerender: \"\",\n      subjectName: \"\",\n      status: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(StatusChangeModal, [{\n    key: \"_handleClickOpen\",\n    value: function _handleClickOpen(status) {\n      this.setState({\n        open: true,\n        option: status\n      });\n    }\n  }, {\n    key: \"_reqTodoList\",\n    value: function () {\n      var _reqTodoList2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var subjectsResult, subjectsAction;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return getAllSubjects();\n\n              case 2:\n                subjectsResult = _context.sent;\n                subjectsAction = getGetAllSubjectsAction(subjectsResult);\n                store.dispatch(subjectsAction);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function _reqTodoList() {\n        return _reqTodoList2.apply(this, arguments);\n      }\n\n      return _reqTodoList;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._reqTodoList();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        spacing: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        style: {\n          paddingLeft: 22\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        className: classes.acceptButton,\n        onClick: function onClick() {\n          return _this2._handleClickOpen(\"approved\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Accept\")), React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        align: \"left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"contained\",\n        color: \"secondary\",\n        className: classes.rejectButton,\n        align: \"center\",\n        onClick: function onClick() {\n          return _this2._handleClickOpen(\"reject\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"Reject\"), React.createElement(Dialog, {\n        fullWidth: this.state.fullWidth,\n        maxWidth: this.state.maxWidth,\n        open: this.state.open,\n        onClose: this.handleClose,\n        \"aria-labelledby\": \"max-width-dialog-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(DialogTitle, {\n        id: \"alert-dialog-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \"Change proposal status\"), React.createElement(Grid, {\n        container: true,\n        spacing: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        style: {\n          padding: 50\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"h6\", {\n        style: {\n          color: grey[800]\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"Please state your reasoning:\"), React.createElement(TextField, {\n        id: \"reason\",\n        multiline: true,\n        rows: \"4\",\n        margin: \"dense\",\n        variant: \"filled\",\n        style: {\n          width: \"100%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        style: {\n          marginTop: 30\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        style: {\n          width: \"70%\",\n          marginTop: 9\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"h6\", {\n        style: {\n          color: grey[800]\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, \"If applicable, please assign this proposal to a subject\"), React.createElement(Select, {\n        value: this.state.subjectName,\n        id: \"subjectName\",\n        onChange: this._handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(MenuItem, {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(\"em\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"None\")), this.props.subjects ? this.props.subjects.map(function (s) {\n        return React.createElement(\"em\", {\n          key: s._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221\n          },\n          __self: this\n        }, React.createElement(MenuItem, {\n          value: s._id,\n          key: s._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222\n          },\n          __self: this\n        }, s.name));\n      }) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }))))), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this._handleUpdate,\n        color: \"primary\",\n        className: classes.confirmButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, \"Confirm Changes\"), React.createElement(Button, {\n        onClick: this._handleClose,\n        color: \"primary\",\n        className: classes.discardButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \"Cancel\"))))));\n    }\n  }]);\n\n  return StatusChangeModal;\n}(React.Component);\n\nexport default withStyles(styles)(StatusChangeModal);","map":{"version":3,"sources":["C:\\Users\\Reyna\\Documents\\GitHub\\SWEN90013\\src\\components\\dashboard\\Proposals\\IndividualProposal\\StatusChangeModal.js"],"names":["React","Grid","Button","green","red","grey","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","TextField","InputLabel","MenuItem","FormControl","Select","axios","store","withStyles","getAllSubjects","getGetAllSubjectsAction","proposalOutcome","styles","theme","acceptButton","backgroundColor","rejectButton","confirmButton","color","discardButton","StatusChangeModal","props","_handleClose","setState","open","_handleChange","event","subjectName","target","value","_handleUpdate","responseText","document","getElementById","state","alert","option","console","log","id","post","acceptReason","then","response","getState","proposal","client","email","secondaryContactEmail","catch","error","rejectReason","fullWidth","maxWidth","rerender","status","subjectsResult","subjectsAction","dispatch","_reqTodoList","classes","paddingLeft","_handleClickOpen","handleClose","padding","width","marginTop","subjects","map","s","_id","name","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { green, red, grey } from \"@material-ui/core/colors\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport axios from \"axios\";\r\nimport store from \"../../../../store\";\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { getAllSubjects } from \"../../../../api\";\r\nimport { getGetAllSubjectsAction } from \"../../../../store/actionCreators\";\r\nimport { proposalOutcome } from \"../../Email/AutomatedEmailFunctions\";\r\n\r\nconst styles = theme => ({\r\n  acceptButton: {\r\n    backgroundColor: green[400],\r\n    \"&:hover\": {\r\n      backgroundColor: green[800]\r\n    }\r\n  },\r\n  rejectButton: {\r\n    backgroundColor: red[400],\r\n    \"&:hover\": {\r\n      backgroundColor: red[800]\r\n    }\r\n  },\r\n  confirmButton: {\r\n    backgroundColor: \"#094183\",\r\n    color: \"#FFFFFF\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#4074B2\"\r\n    }\r\n  },\r\n  discardButton: {\r\n    color: \"#094183\"\r\n  }\r\n});\r\n\r\nclass StatusChangeModal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      open: false,\r\n      fullWidth: true,\r\n      maxWidth: \"md\",\r\n      option: \"\",\r\n      rerender: \"\",\r\n      subjectName: \"\",\r\n      status: \"\"\r\n    };\r\n  }\r\n\r\n  _handleClickOpen(status) {\r\n    this.setState({ open: true, option: status });\r\n  }\r\n\r\n  _handleClose = () => {\r\n    this.setState({ open: false });\r\n  };\r\n\r\n  async _reqTodoList() {\r\n    const subjectsResult = await getAllSubjects();\r\n    const subjectsAction = getGetAllSubjectsAction(subjectsResult);\r\n    store.dispatch(subjectsAction);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this._reqTodoList();\r\n  }\r\n\r\n  _handleChange = event => {\r\n    this.setState(() => {\r\n      return {\r\n        subjectName: event.target.value\r\n      };\r\n    });\r\n  };\r\n\r\n  _handleUpdate = () => {\r\n    var responseText = document.getElementById(\"reason\").value;\r\n\r\n    if (responseText === \"\" || this.state.subjectName === \"\") {\r\n      alert(\"Please complete all fields\");\r\n    } else {\r\n      if (this.state.option === \"approved\") {\r\n        this.setState({ open: false });\r\n        console.log(\"the proposal id is \" + this.props.id);\r\n        console.log(\r\n          \"the subject for this project is \" + this.state.subjectName\r\n        );\r\n        axios\r\n          .post(\r\n            \"http://172.26.88.142:3000/api/proposal/\" +\r\n              this.props.id +\r\n              \"/accept\",\r\n            {\r\n              subjectName: this.state.subjectName,\r\n              acceptReason: responseText\r\n            }\r\n          )\r\n          .then(function(response) {\r\n            console.log(response);\r\n            proposalOutcome(\r\n              store.getState().proposal.client.email,\r\n              store.getState().proposal.client.secondaryContactEmail,\r\n              \"accept\",\r\n              responseText\r\n            );\r\n          })\r\n          .catch(function(error) {\r\n            console.log(error);\r\n          });\r\n      } else if (this.state.option === \"reject\") {\r\n        this.setState({ open: false });\r\n        console.log(\"the proposal id is\" + this.props.id);\r\n        console.log(\"the reason to reject is \" + responseText);\r\n        axios\r\n          .post(\r\n            \"http://172.26.88.142:3000/api/proposal/\" +\r\n              this.props.id +\r\n              \" /reject\",\r\n            {\r\n              rejectReason: responseText\r\n            }\r\n          )\r\n          .then(function(response) {\r\n            console.log(response);\r\n            proposalOutcome(\r\n              store.getState().proposal.client.email,\r\n              store.getState().proposal.client.secondaryContactEmail,\r\n              \"reject\",\r\n              responseText\r\n            );\r\n          })\r\n          .catch(function(error) {\r\n            console.log(error);\r\n          });\r\n      }\r\n    }\r\n  };\r\n\r\n  _handleChange = event => {\r\n    this.setState({ subjectName: [event.target.value] });\r\n    console.log(this.state.subjectName);\r\n  };\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <Grid container spacing={24}>\r\n          <Grid item xs={6} style={{ paddingLeft: 22 }}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              className={classes.acceptButton}\r\n              onClick={() => this._handleClickOpen(\"approved\")}\r\n            >\r\n              Accept\r\n            </Button>\r\n          </Grid>\r\n          <Grid item xs={6} align=\"left\">\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              className={classes.rejectButton}\r\n              align=\"center\"\r\n              onClick={() => this._handleClickOpen(\"reject\")}\r\n            >\r\n              Reject\r\n            </Button>\r\n            <Dialog\r\n              fullWidth={this.state.fullWidth}\r\n              maxWidth={this.state.maxWidth}\r\n              open={this.state.open}\r\n              onClose={this.handleClose}\r\n              aria-labelledby=\"max-width-dialog-title\"\r\n            >\r\n              <DialogTitle id=\"alert-dialog-title\">\r\n                Change proposal status\r\n              </DialogTitle>\r\n              <Grid container spacing={24}>\r\n                <Grid item xs={6} style={{ padding: 50 }}>\r\n                  <h6 style={{ color: grey[800] }}>\r\n                    Please state your reasoning:\r\n                  </h6>\r\n                  <TextField\r\n                    id=\"reason\"\r\n                    multiline\r\n                    rows=\"4\"\r\n                    margin=\"dense\"\r\n                    variant=\"filled\"\r\n                    style={{ width: \"100%\" }}\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={6} style={{ marginTop: 30 }}>\r\n                  <FormControl style={{ width: \"70%\", marginTop: 9 }}>\r\n                    <h6 style={{ color: grey[800] }}>\r\n                      If applicable, please assign this proposal to a subject\r\n                    </h6>\r\n                    <Select\r\n                      value={this.state.subjectName}\r\n                      id=\"subjectName\"\r\n                      onChange={this._handleChange}\r\n                    >\r\n                      <MenuItem value=\"\">\r\n                        <em>None</em>\r\n                      </MenuItem>\r\n\r\n                      {this.props.subjects ? (\r\n                        this.props.subjects.map(s => (\r\n                          <em key={s._id}>\r\n                            <MenuItem value={s._id} key={s._id}>\r\n                              {s.name}\r\n                            </MenuItem>\r\n                          </em>\r\n                        ))\r\n                      ) : (\r\n                        <div />\r\n                      )}\r\n                    </Select>\r\n                  </FormControl>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              <DialogActions>\r\n                <Button\r\n                  onClick={this._handleUpdate}\r\n                  color=\"primary\"\r\n                  className={classes.confirmButton}\r\n                >\r\n                  Confirm Changes\r\n                </Button>\r\n\r\n                <Button\r\n                  onClick={this._handleClose}\r\n                  color=\"primary\"\r\n                  className={classes.discardButton}\r\n                >\r\n                  Cancel\r\n                </Button>\r\n              </DialogActions>\r\n            </Dialog>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(StatusChangeModal);\r\n"]},"metadata":{},"sourceType":"module"}