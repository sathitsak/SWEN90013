{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\src\\\\components\\\\dashboard\\\\Products\\\\AllProducts.js\";\n\n/**\r\n * This component contains all products. It is entered via a \"View Products\" link on the app container drawer.\r\n * Author: Reyna Tan\r\n * Date: 09/10/2019\r\n */\nimport React, { PureComponent } from 'react';\nimport store from \"../../../store\";\nimport { getAllSubjects, getProjectList, getSupervisors } from \"../../../api\";\nimport { getAllProjectAction, getSupervisorsAction, getAllSubjectsAction } from \"../../../store/actionCreators\";\nimport MaterialTable from 'material-table';\n\nvar AllProducts =\n/*#__PURE__*/\nfunction (_PureComponent) {\n  _inherits(AllProducts, _PureComponent);\n\n  function AllProducts(props) {\n    var _this;\n\n    _classCallCheck(this, AllProducts);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AllProducts).call(this, props));\n\n    _this._showSupervisorName = function (supervisorId) {\n      var supervisors = _this.state.supervisors;\n      var supervisorName = \" \";\n      supervisors.forEach(function (sp) {\n        if (sp._id === supervisorId) {\n          supervisorName = sp.firstName + \" \" + sp.lastName;\n        }\n      });\n      return supervisorName;\n    };\n\n    _this.state = store.getState();\n    _this._handleStoreChange = _this._handleStoreChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    store.subscribe(_this._handleStoreChange);\n    return _this;\n  }\n\n  _createClass(AllProducts, [{\n    key: \"_handleStoreChange\",\n    value: function _handleStoreChange() {\n      this.setState(store.getState());\n    }\n  }, {\n    key: \"_reqTodoList\",\n    value: function () {\n      var _reqTodoList2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var projects, getAllProjectAct, supervisors, getSupervisorsAct, subjects, getAllSubjectsAct;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return getProjectList();\n\n              case 2:\n                projects = _context.sent;\n                getAllProjectAct = getAllProjectAction(projects);\n                store.dispatch(getAllProjectAct);\n                _context.next = 7;\n                return getSupervisors();\n\n              case 7:\n                supervisors = _context.sent;\n                getSupervisorsAct = getSupervisorsAction(supervisors);\n                store.dispatch(getSupervisorsAct);\n                _context.next = 12;\n                return getAllSubjects();\n\n              case 12:\n                subjects = _context.sent;\n                getAllSubjectsAct = getAllSubjectsAction(subjects);\n                store.dispatch(getAllSubjectsAct);\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function _reqTodoList() {\n        return _reqTodoList2.apply(this, arguments);\n      }\n\n      return _reqTodoList;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._reqTodoList();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      console.log(nextProps.currentPage);\n    }\n  }, {\n    key: \"_extractYear\",\n    value: function _extractYear(str) {\n      // Format in which the date is stored in the DB: 2019-10-07T03:34:16.921Z\n      // Slice the string using \"-\" and extract only the first element\n      return str.split(\"-\")[0];\n    }\n  }, {\n    key: \"_formatDataIntoTableList\",\n    value: function _formatDataIntoTableList() {\n      var _this2 = this;\n\n      var projects = this.state.projects;\n      var productList = [];\n      projects.forEach(function (p) {\n        // First check if valid\n        if ('proposal' in p) {\n          if ('client' in p.proposal) {\n            if ('organisation' in p.proposal.client) {\n              if (p.product.length > 0) {\n                p.product.forEach(function (team) {\n                  var nextProduct = {\n                    // year: this._extractYear(p.date),\n                    subjectId: p.subjectId,\n                    teamName: team.name,\n                    projectName: p.name,\n                    supervisor: _this2._showSupervisorName(p.supervisorId),\n                    client: p.proposal.client.firstName + \" \" + p.proposal.client.lastName,\n                    activelyUsed: team.activelyUsed,\n                    deployed: team.deployed,\n                    technologies: team.technologies,\n                    _id: p._id\n                  };\n                  productList.push(nextProduct);\n                });\n              }\n            }\n          }\n        }\n      });\n      return productList;\n    }\n  }, {\n    key: \"_getSupervisorFilterLookup\",\n    value: function _getSupervisorFilterLookup() {\n      var supervisors = this.state.supervisors;\n      var supervisorList = {};\n      supervisors.forEach(function (sp) {\n        var name = sp.firstName + \" \" + sp.lastName;\n\n        if (!(name in supervisorList)) {\n          supervisorList[name] = name;\n        }\n      });\n      return supervisorList;\n    }\n  }, {\n    key: \"_getSubjectFilterLookup\",\n    value: function _getSubjectFilterLookup() {\n      var projects = this.state.projects;\n      var subjectList = {};\n      projects.forEach(function (p) {\n        // First check if valid\n        if ('proposal' in p) {\n          if ('client' in p.proposal) {\n            if ('organisation' in p.proposal.client) {\n              if (!(p.subjectId in subjectList)) {\n                subjectList[p.subjectId] = p.subjectId;\n              }\n            }\n          }\n        }\n      });\n      return subjectList;\n    } // Rediret to ProjectById page\n\n  }, {\n    key: \"_handleClick\",\n    value: function _handleClick(_id) {\n      var history = this.props.history;\n      history.push(\"/dashboard/projects/\".concat(_id));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(MaterialTable, {\n        title: \"All Projects\",\n        columns: [// { title: 'Year', field: 'year', filterCellStyle:{maxWidth:50} },\n        _defineProperty({\n          title: 'Subject',\n          field: 'subjectId',\n          filterCellStyle: {\n            maxWidth: 50\n          },\n          lookup: this._getSubjectFilterLookup()\n        }, \"filterCellStyle\", {\n          paddingTop: 0\n        }), {\n          title: 'Team Name',\n          field: 'teamName'\n        }, {\n          title: 'Project Name',\n          field: 'projectName'\n        }, {\n          title: 'Supervisor',\n          field: 'supervisor',\n          lookup: this._getSupervisorFilterLookup(),\n          filterCellStyle: {\n            paddingTop: 0\n          }\n        }, {\n          title: 'Client',\n          field: 'client'\n        }, {\n          title: 'Actively Used',\n          field: 'activelyUsed',\n          lookup: {\n            true: \"Yes\",\n            false: \"No\"\n          },\n          filterCellStyle: {\n            paddingTop: 0\n          }\n        }, {\n          title: 'Deployed',\n          field: 'deployed',\n          lookup: {\n            true: \"Yes\",\n            false: \"No\"\n          },\n          filterCellStyle: {\n            paddingTop: 0\n          }\n        }, {\n          title: 'Technologies',\n          field: 'technologies'\n        }],\n        data: this._formatDataIntoTableList(),\n        options: {\n          filtering: true\n        },\n        onRowClick: function onRowClick(event, rowData) {\n          return _this3._handleClick(rowData._id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return AllProducts;\n}(PureComponent);\n\nexport default AllProducts;","map":{"version":3,"sources":["C:\\Users\\Reyna\\Documents\\GitHub\\SWEN90013\\src\\components\\dashboard\\Products\\AllProducts.js"],"names":["React","PureComponent","store","getAllSubjects","getProjectList","getSupervisors","getAllProjectAction","getSupervisorsAction","getAllSubjectsAction","MaterialTable","AllProducts","props","_showSupervisorName","supervisorId","supervisors","state","supervisorName","forEach","sp","_id","firstName","lastName","getState","_handleStoreChange","bind","subscribe","setState","projects","getAllProjectAct","dispatch","getSupervisorsAct","subjects","getAllSubjectsAct","_reqTodoList","nextProps","console","log","currentPage","str","split","productList","p","proposal","client","product","length","team","nextProduct","subjectId","teamName","name","projectName","supervisor","activelyUsed","deployed","technologies","push","supervisorList","subjectList","history","title","field","filterCellStyle","maxWidth","lookup","_getSubjectFilterLookup","paddingTop","_getSupervisorFilterLookup","true","false","_formatDataIntoTableList","filtering","event","rowData","_handleClick"],"mappings":"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","sourcesContent":["/**\r\n * This component contains all products. It is entered via a \"View Products\" link on the app container drawer.\r\n * Author: Reyna Tan\r\n * Date: 09/10/2019\r\n */\r\n\r\nimport React, { PureComponent } from 'react';\r\nimport store from \"../../../store\";\r\nimport {getAllSubjects, getProjectList, getSupervisors} from \"../../../api\";\r\nimport {\r\n    getAllProjectAction,\r\n    getSupervisorsAction,\r\n    getAllSubjectsAction\r\n} from \"../../../store/actionCreators\";\r\nimport MaterialTable from 'material-table';\r\n\r\nclass AllProducts extends PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = store.getState();\r\n\r\n        this._handleStoreChange = this._handleStoreChange.bind(this);\r\n        store.subscribe(this._handleStoreChange);\r\n    }\r\n\r\n    _handleStoreChange() {\r\n        this.setState(store.getState());\r\n    }\r\n\r\n    async _reqTodoList() {\r\n        const projects = await getProjectList();\r\n        const getAllProjectAct = getAllProjectAction(projects);\r\n        store.dispatch(getAllProjectAct);\r\n\r\n        const supervisors = await getSupervisors();\r\n        const getSupervisorsAct = getSupervisorsAction(supervisors);\r\n        store.dispatch(getSupervisorsAct);\r\n\r\n        const subjects = await getAllSubjects();\r\n        const getAllSubjectsAct = getAllSubjectsAction(subjects);\r\n        store.dispatch(getAllSubjectsAct);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this._reqTodoList();\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        console.log(nextProps.currentPage);\r\n    }\r\n\r\n    _extractYear(str) {\r\n        // Format in which the date is stored in the DB: 2019-10-07T03:34:16.921Z\r\n        // Slice the string using \"-\" and extract only the first element\r\n        return str.split(\"-\")[0];\r\n    }\r\n\r\n    _formatDataIntoTableList() {\r\n        const {projects} = this.state;\r\n\r\n        let productList = [];\r\n\r\n        projects.forEach(p => {\r\n\r\n            // First check if valid\r\n            if ('proposal' in p) {\r\n                if ('client' in p.proposal) {\r\n                    if ('organisation' in p.proposal.client) {\r\n                        if (p.product.length > 0) {\r\n                            \r\n                            p.product.forEach(team => {\r\n                                let nextProduct = {\r\n                                    // year: this._extractYear(p.date),\r\n                                    subjectId: p.subjectId,\r\n                                    teamName: team.name,\r\n                                    projectName: p.name,\r\n                                    supervisor: this._showSupervisorName(p.supervisorId),\r\n                                    client: p.proposal.client.firstName + \" \" + p.proposal.client.lastName,\r\n                                    activelyUsed: team.activelyUsed,\r\n                                    deployed: team.deployed,\r\n                                    technologies: team.technologies,\r\n                                    _id: p._id\r\n                                }\r\n                    \r\n                                productList.push(nextProduct);\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            \r\n        })\r\n\r\n        return productList;\r\n    }\r\n\r\n    _showSupervisorName = (supervisorId) => {\r\n        const {supervisors} = this.state;\r\n        let supervisorName = \" \";\r\n        supervisors.forEach(sp => {\r\n            if (sp._id === supervisorId) {\r\n                supervisorName = sp.firstName + \" \" + sp.lastName;\r\n            }\r\n        });\r\n        return supervisorName;\r\n    };\r\n\r\n    _getSupervisorFilterLookup() {\r\n        const {supervisors} = this.state;\r\n\r\n        let supervisorList = {};\r\n\r\n        supervisors.forEach(sp => {\r\n            let name = sp.firstName + \" \" + sp.lastName;\r\n\r\n            if (! (name in supervisorList)) {\r\n                supervisorList[name] = name;\r\n            }\r\n        })\r\n\r\n        return supervisorList;\r\n    }\r\n\r\n    _getSubjectFilterLookup() {\r\n        const {projects} = this.state;\r\n\r\n        let subjectList = {};\r\n\r\n        projects.forEach(p => {\r\n\r\n            // First check if valid\r\n            if ('proposal' in p) {\r\n                if ('client' in p.proposal) {\r\n                    if ('organisation' in p.proposal.client) {\r\n                        if (! (p.subjectId in subjectList)) {\r\n                            subjectList[p.subjectId] = p.subjectId;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            \r\n        })\r\n\r\n        return subjectList;\r\n    }\r\n\r\n    // Rediret to ProjectById page\r\n    _handleClick(_id) {\r\n        const { history } = this.props;\r\n        history.push(`/dashboard/projects/${_id}`);\r\n    }\r\n\r\n    render() {\r\n        \r\n        return (\r\n            <MaterialTable\r\n                title=\"All Projects\"\r\n                columns={[\r\n                    // { title: 'Year', field: 'year', filterCellStyle:{maxWidth:50} },\r\n                    { title: 'Subject', field: 'subjectId', filterCellStyle:{maxWidth:50}, lookup: this._getSubjectFilterLookup(), filterCellStyle:{paddingTop:0} },\r\n                    { title: 'Team Name', field: 'teamName' },\r\n                    { title: 'Project Name', field: 'projectName' },\r\n                    { title: 'Supervisor', field: 'supervisor', lookup: this._getSupervisorFilterLookup(), filterCellStyle:{paddingTop:0} },\r\n                    { title: 'Client', field: 'client' },\r\n                    { title: 'Actively Used', field: 'activelyUsed', lookup: { true: \"Yes\", false: \"No\"}, filterCellStyle:{paddingTop:0} },\r\n                    { title: 'Deployed', field: 'deployed', lookup: { true: \"Yes\", false: \"No\"}, filterCellStyle:{paddingTop:0} },                 \r\n                    { title: 'Technologies', field: 'technologies' }\r\n                ]}\r\n                data={this._formatDataIntoTableList()}\r\n                options={{\r\n                    filtering: true,\r\n                }}\r\n                onRowClick={(event, rowData) => this._handleClick(rowData._id)}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default (AllProducts);"]},"metadata":{},"sourceType":"module"}