{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Reyna\\\\Documents\\\\GitHub\\\\SWEN90013\\\\src\\\\components\\\\dashboard\\\\Client\\\\ClientPageModal.js\";\nimport React from \"react\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Chip from \"@material-ui/core/Chip\";\nimport FaceIcon from \"@material-ui/icons/Face\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport { grey, red } from \"@material-ui/core/colors\";\nimport ErrorOutlinedIcon from '@material-ui/icons/ErrorOutlined';\nimport ErrorOutlineOutlinedIcon from '@material-ui/icons/ErrorOutlineOutlined';\nimport ClientDetails from \"./modalcomponents/ClientDetails\";\nimport ClientOrg from \"./modalcomponents/ClientOrg\";\nimport Notes from \"../Notes/Notes\";\nimport store from \"../../../store\";\nimport { getClientById } from \"../../../../api\";\nimport { updateClientAction, getClientByIdAction } from \"../../../store/actionCreators\";\nimport EditClientModal from \"./EditClientModal\";\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      flexGrow: 1\n    },\n    paper: {\n      backgroundColor: theme.palette.background.paper,\n      boxShadow: theme.shadows[5],\n      padding: theme.spacing(4),\n      paddingLeft: theme.spacing(4),\n      outline: \"none\"\n    },\n    editButton: {\n      color: \"#094183\"\n    },\n    closeButton: {\n      backgroundColor: \"#094183\",\n      color: \"#FFFFFF\",\n      '&:hover': {\n        backgroundColor: \"#4074B2\"\n      }\n    },\n    iconFalse: {\n      marginLeft: 20,\n      marginBottom: 10,\n      color: grey[500],\n      '&:hover': {\n        color: red[500]\n      },\n      fontSize: 35,\n      verticalAlign: 'middle'\n    },\n    iconTrue: {\n      marginLeft: 20,\n      marginBottom: 10,\n      '&:hover': {\n        color: grey[500]\n      },\n      fontSize: 35,\n      verticalAlign: 'middle',\n      color: red[500]\n    },\n    chipFlag: {\n      color: red[500]\n    }\n  };\n};\n\nvar ClientPageModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ClientPageModal, _React$Component);\n\n  function ClientPageModal(props) {\n    var _this;\n\n    _classCallCheck(this, ClientPageModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ClientPageModal).call(this, props));\n\n    _this._handleClickOpen = function () {\n      _this.setState({\n        open: true\n      });\n    };\n\n    _this._handleClose = function () {\n      _this.setState({\n        open: false\n      });\n    };\n\n    _this._concatenateNames = function (firstName, lastName) {\n      return firstName + \" \" + lastName;\n    };\n\n    _this._handleClientFlagUpdate = function () {\n      // Invert clientFlag value and update state and DB\n      var currentFlag = !_this.state.clientFlag;\n\n      _this.setState({\n        clientFlag: currentFlag\n      });\n\n      var client = _this.props.client;\n      client.flag = currentFlag; // Send PUT request\n\n      var updateClientAct = updateClientAction(client._id, client);\n      store.dispatch(updateClientAct);\n    };\n\n    _this.state = store.getState();\n    _this._handleStoreChange = _this._handleStoreChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    store.subscribe(_this._handleStoreChange);\n\n    _this.state.setState({\n      open: false,\n      fullWidth: true,\n      maxWidth: \"xl\",\n      clientFlag: _this.props.client.flag\n    });\n\n    return _this;\n  }\n\n  _createClass(ClientPageModal, [{\n    key: \"_handleStoreChange\",\n    value: function _handleStoreChange() {\n      this.setState(store.getState());\n    }\n  }, {\n    key: \"_reqTodoList\",\n    value: function () {\n      var _reqTodoList2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(clientID) {\n        var client, getClientAction;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return getClientById(clientID);\n\n              case 2:\n                client = _context.sent;\n                getClientAction = getClientByIdAction(client);\n                store.dispatch(getClientAction);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function _reqTodoList(_x) {\n        return _reqTodoList2.apply(this, arguments);\n      }\n\n      return _reqTodoList;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var clientID = this.props.client._id;\n\n      this._reqTodoList(clientID);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var classes = this.props.classes;\n      var flagIcon;\n      var client = this.props.client;\n\n      if (client.flag) {\n        flagIcon = React.createElement(ErrorOutlinedIcon, {\n          className: classes.iconTrue,\n          onClick: this._handleClientFlagUpdate,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        });\n      } else {\n        flagIcon = React.createElement(ErrorOutlineOutlinedIcon, {\n          className: classes.iconFalse,\n          onClick: this._handleClientFlagUpdate,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        });\n      }\n\n      if (!client) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(Chip, {\n        onClick: this._handleClickOpen,\n        icon: client.flag ? React.createElement(ErrorOutlinedIcon, {\n          className: classes.chipFlag,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }) : React.createElement(FaceIcon, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }),\n        label: this._concatenateNames(client.firstName, client.lastName),\n        variant: \"outlined\",\n        align: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }), React.createElement(Dialog, {\n        fullWidth: this.state.fullWidth,\n        maxWidth: this.state.maxWidth,\n        open: this.state.open,\n        onClose: this._handleClose,\n        \"aria-labelledby\": \"max-width-dialog-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(DialogContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        spacing: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        className: classes.paper,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        style: {\n          color: \"#094183\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, this._concatenateNames(client.firstName, client.lastName), flagIcon), React.createElement(ClientDetails, {\n        email: client.email,\n        technicalAbility: client.technicalAbility,\n        contactNumber: client.contactNumber,\n        secondaryContactName: this._concatenateNames(client.secondaryContactFirstName, client.secondaryContactLastName),\n        secondaryContactEmail: client.secondaryContactEmail,\n        secondaryContactNumber: client.secondaryContactNumber,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }))), React.createElement(Grid, {\n        item: true,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        style: {\n          marginBottom: \"5%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        className: classes.paper,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(ClientOrg, {\n        orgName: client.organisation.name,\n        orgSize: client.organisation.size,\n        industry: client.organisation.industry,\n        description: client.organisation.description,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }))), React.createElement(Grid, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        className: classes.paper,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(Notes, {\n        notes: client.notes,\n        object: client,\n        objectType: \"client\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      })))))), React.createElement(DialogActions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(Button, {\n        onClick: this._handleClose,\n        className: classes.closeButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"Close\"), React.createElement(EditClientModal, {\n        client: client,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return ClientPageModal;\n}(React.Component);\n\nexport default withStyles(styles)(ClientPageModal);","map":{"version":3,"sources":["C:\\Users\\Reyna\\Documents\\GitHub\\SWEN90013\\src\\components\\dashboard\\Client\\ClientPageModal.js"],"names":["React","withStyles","Button","Chip","FaceIcon","Grid","Paper","Dialog","DialogActions","DialogContent","grey","red","ErrorOutlinedIcon","ErrorOutlineOutlinedIcon","ClientDetails","ClientOrg","Notes","store","getClientById","updateClientAction","getClientByIdAction","EditClientModal","styles","theme","root","flexGrow","paper","backgroundColor","palette","background","boxShadow","shadows","padding","spacing","paddingLeft","outline","editButton","color","closeButton","iconFalse","marginLeft","marginBottom","fontSize","verticalAlign","iconTrue","chipFlag","ClientPageModal","props","_handleClickOpen","setState","open","_handleClose","_concatenateNames","firstName","lastName","_handleClientFlagUpdate","currentFlag","state","clientFlag","client","flag","updateClientAct","_id","dispatch","getState","_handleStoreChange","bind","subscribe","fullWidth","maxWidth","clientID","getClientAction","_reqTodoList","classes","flagIcon","email","technicalAbility","contactNumber","secondaryContactFirstName","secondaryContactLastName","secondaryContactEmail","secondaryContactNumber","organisation","name","size","industry","description","notes","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {withStyles} from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport FaceIcon from \"@material-ui/icons/Face\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport {grey, red} from \"@material-ui/core/colors\";\r\nimport ErrorOutlinedIcon from '@material-ui/icons/ErrorOutlined';\r\nimport ErrorOutlineOutlinedIcon from '@material-ui/icons/ErrorOutlineOutlined';\r\nimport ClientDetails from \"./modalcomponents/ClientDetails\";\r\nimport ClientOrg from \"./modalcomponents/ClientOrg\";\r\nimport Notes from \"../Notes/Notes\";\r\nimport store from \"../../../store\";\r\nimport {getClientById} from \"../../../../api\";\r\nimport {updateClientAction, getClientByIdAction} from \"../../../store/actionCreators\";\r\nimport EditClientModal from \"./EditClientModal\";\r\n\r\nconst styles = theme => ({\r\n    root: {\r\n        flexGrow: 1\r\n    },\r\n    paper: {\r\n        backgroundColor: theme.palette.background.paper,\r\n        boxShadow: theme.shadows[5],\r\n        padding: theme.spacing(4),\r\n        paddingLeft: theme.spacing(4),\r\n        outline: \"none\"\r\n    },\r\n    editButton: {\r\n        color: \"#094183\",\r\n    },\r\n    closeButton: {\r\n        backgroundColor: \"#094183\",\r\n        color: \"#FFFFFF\",\r\n        '&:hover': {\r\n            backgroundColor: \"#4074B2\",\r\n        },\r\n    },\r\n    iconFalse: {\r\n        marginLeft: 20,\r\n        marginBottom: 10,\r\n        color: grey[500],\r\n        '&:hover': {\r\n            color: red[500],\r\n        },\r\n        fontSize: 35,\r\n        verticalAlign: 'middle',\r\n    },\r\n    iconTrue: {\r\n        marginLeft: 20,\r\n        marginBottom: 10,\r\n        '&:hover': {\r\n            color: grey[500],\r\n        },\r\n        fontSize: 35,\r\n        verticalAlign: 'middle',\r\n        color: red[500]\r\n    },\r\n    chipFlag: {\r\n        color: red[500]\r\n    }\r\n});\r\n\r\nclass ClientPageModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = store.getState();\r\n        this._handleStoreChange = this._handleStoreChange.bind(this);\r\n        store.subscribe(this._handleStoreChange);\r\n\r\n        this.state.setState({\r\n            open: false,\r\n            fullWidth: true,\r\n            maxWidth: \"xl\",\r\n            clientFlag: this.props.client.flag\r\n        });\r\n    }\r\n\r\n    _handleStoreChange() {\r\n        this.setState(store.getState());\r\n    }\r\n\r\n    async _reqTodoList(clientID) {\r\n        const client = await getClientById(clientID);\r\n        const getClientAction = getClientByIdAction(client);\r\n        store.dispatch(getClientAction);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const clientID = this.props.client._id;\r\n        this._reqTodoList(clientID);\r\n    }\r\n\r\n    _handleClickOpen = () => {\r\n        this.setState({open: true});\r\n    };\r\n\r\n    _handleClose = () => {\r\n        this.setState({open: false});\r\n    };\r\n\r\n    _concatenateNames = (firstName, lastName) => {\r\n        return (firstName + \" \" + lastName);\r\n    };\r\n\r\n    _handleClientFlagUpdate = () => {\r\n        // Invert clientFlag value and update state and DB\r\n        var currentFlag = !this.state.clientFlag;\r\n        this.setState({clientFlag: currentFlag});\r\n\r\n        let client = this.props.client;\r\n        client.flag = currentFlag;\r\n\r\n        // Send PUT request\r\n        const updateClientAct = updateClientAction(client._id, client);\r\n        store.dispatch(updateClientAct);\r\n    };\r\n\r\n    render() {\r\n        const {classes} = this.props;\r\n        var flagIcon;\r\n        var client = this.props.client;\r\n\r\n        if (client.flag) {\r\n            flagIcon = <ErrorOutlinedIcon className={classes.iconTrue}\r\n                                          onClick={this._handleClientFlagUpdate}/>\r\n        } else {\r\n            flagIcon = <ErrorOutlineOutlinedIcon className={classes.iconFalse}\r\n                                                 onClick={this._handleClientFlagUpdate}/>\r\n        }\r\n\r\n        if (!client) {\r\n            return <div/>\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <Chip\r\n                    onClick={this._handleClickOpen}\r\n                    icon={client.flag ? <ErrorOutlinedIcon className={classes.chipFlag}/> : <FaceIcon/>}\r\n                    label={this._concatenateNames(client.firstName, client.lastName)}\r\n                    variant=\"outlined\"\r\n                    align=\"center\"\r\n                />\r\n                <Dialog\r\n                    fullWidth={this.state.fullWidth}\r\n                    maxWidth={this.state.maxWidth}\r\n                    open={this.state.open}\r\n                    onClose={this._handleClose}\r\n                    aria-labelledby=\"max-width-dialog-title\"\r\n                >\r\n                    <DialogContent>\r\n                        <Grid container spacing={3}>\r\n                            <Grid item xs={6}>\r\n                                <Paper className={classes.paper}>\r\n                                    <h1 style={{color: \"#094183\"}}>\r\n                                        {this._concatenateNames(client.firstName, client.lastName)}{flagIcon}\r\n                                    </h1>\r\n                                    <ClientDetails\r\n                                        email={client.email}\r\n                                        technicalAbility={client.technicalAbility}\r\n                                        contactNumber={client.contactNumber}\r\n                                        secondaryContactName={this._concatenateNames(client.secondaryContactFirstName, client.secondaryContactLastName)}\r\n                                        secondaryContactEmail={client.secondaryContactEmail}\r\n                                        secondaryContactNumber={client.secondaryContactNumber}\r\n                                    />\r\n                                </Paper>\r\n                            </Grid>\r\n\r\n                            <Grid item xs={6}>\r\n                                <Grid style={{marginBottom: \"5%\"}}>\r\n                                    <Paper className={classes.paper}>\r\n                                        <ClientOrg\r\n                                            orgName={client.organisation.name}\r\n                                            orgSize={client.organisation.size}\r\n                                            industry={client.organisation.industry}\r\n                                            description={client.organisation.description}\r\n                                        />\r\n                                    </Paper>\r\n                                </Grid>\r\n                                <Grid>\r\n                                    <Paper className={classes.paper}>\r\n                                        <Notes\r\n                                            notes={client.notes}\r\n                                            object={client}\r\n                                            objectType={\"client\"}\r\n                                        />\r\n                                    </Paper>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </Grid>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this._handleClose}\r\n                                className={classes.closeButton}>\r\n                            Close\r\n                        </Button>\r\n                        <EditClientModal client={client} />\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withStyles(styles)(ClientPageModal);\r\n"]},"metadata":{},"sourceType":"module"}